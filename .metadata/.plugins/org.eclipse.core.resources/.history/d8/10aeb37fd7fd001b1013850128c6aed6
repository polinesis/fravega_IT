package com.example.microservicios.app.sucursales;


import static org.hamcrest.CoreMatchers.notNullValue;
import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertNotNull;
import static org.junit.jupiter.api.Assertions.assertTrue;

import java.util.Optional;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.http.ResponseEntity;

import com.example.commons.sucursales.models.entity.Sucursal;
import com.example.microservicios.app.sucursales.controllers.SucursalController;



@SpringBootTest
class MicroservicioSucursalesApplicationTests {

	
	@Autowired
	SucursalController sucursalController;
	
	@Test
	void testCrear() {
		
		Sucursal sucursal = new Sucursal();
		
		 int numeroAleatorio = (int) (Math.random()*25+1);
		 Long idSucursal = (long) numeroAleatorio;
		
		sucursal.setId(idSucursal);
		sucursal.setDireccion("TEST - angel gallardo 2333");
		sucursal.setHorarioAtencion("TEST - Lunes a viernes de 9 a 3");
		sucursal.setLatitud(-34.57060);
		sucursal.setLongitud(-58.72734);
		
		sucursalController.getService().save(sucursal);
		Optional<Sucursal> o = sucursalController.getService().findById(idSucursal);
		Sucursal sucursalBd = o.get();
		
		assertEquals(idSucursal, sucursalBd.getId());
		
	}
	
	@Test
	void getSucursales() {
		
		assertNotNull(sucursalController.getService().findAll());
		
	}
	
	
	
	

}
